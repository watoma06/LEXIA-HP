# 🚀 LEXIA-HP GitHub Actions ワークフロー

## 概要

LEXIA-HPウェブサイトのデプロイと品質管理のために、2つのGitHub Actionsワークフローが設定されています。

## ワークフロー一覧

### 1. 🚀 メインワークフロー: `Deploy LEXIA-HP Website`

**ファイル**: `.github/workflows/static.yml`

**実行タイミング**:
- `main`ブランチへのプッシュ時
- プルリクエストの作成・更新時（プレビュー機能）
- 手動実行

**機能**:
- ✅ **品質チェック**
  - HTMLバリデーション
  - ファイルサイズ監視
  - リンクチェック
  - 画像最適化チェック

- ⚡ **パフォーマンス最適化**
  - CSS/JavaScript圧縮
  - キャッシュ機能
  - 画像最適化

- 🔒 **セキュリティスキャン**
  - 機密情報パターンチェック
  - 外部URL検証
  - 依存関係スキャン

- 🌐 **デプロイ機能**
  - GitHub Pagesへの自動デプロイ
  - プルリクエストプレビュー

### 2. 🔧 バックアップワークフロー: `Simple Deploy (Backup)`

**ファイル**: `.github/workflows/backup-deploy.yml`

**実行タイミング**:
- メインワークフローが失敗した場合（自動フォールバック）
- コミットメッセージに`[backup-deploy]`が含まれる場合
- 手動実行

**機能**:
- 🚀 シンプルなGitHub Pagesデプロイ
- ⚠️ メインワークフロー失敗時の緊急デプロイ
- 📊 実行条件の詳細ログ

## 使用方法

### 通常のデプロイ
```bash
# mainブランチにプッシュするだけで自動実行
git push origin main
```

### 緊急デプロイ（バックアップワークフロー）
```bash
# コミットメッセージに [backup-deploy] を含める
git commit -m "緊急修正 [backup-deploy]"
git push origin main
```

### 手動実行
1. GitHubリポジトリの「Actions」タブを開く
2. 実行したいワークフローを選択
3. 「Run workflow」ボタンをクリック

### プルリクエストプレビュー
- プルリクエストを作成すると自動でプレビューサイトが生成されます
- プレビューURLはワークフローの実行結果で確認できます

## トラブルシューティング

### メインワークフローが失敗する場合
1. **品質チェック失敗**: ワークフローのログで詳細を確認
2. **セキュリティスキャン失敗**: 機密情報が含まれていないか確認
3. **バックアップワークフロー**: 自動的にフォールバックデプロイが実行されます

### バックアップワークフローも失敗する場合
1. リポジトリの設定を確認
   - Settings > Pages > Source が "GitHub Actions" になっているか
   - 必要な権限が設定されているか
2. 手動でワークフローを実行してみる

## 設定のカスタマイズ

### メインワークフローの設定変更
- `static.yml`の環境変数セクションで各種設定を調整可能
- 品質チェックの閾値
- 最適化の設定
- セキュリティスキャンのパターン

### バックアップワークフローの設定変更
- `backup-deploy.yml`の実行条件を変更可能
- フォールバック条件のカスタマイズ

## 監視とメンテナンス

### 定期的な確認項目
- [ ] ワークフローの実行状況
- [ ] デプロイ時間の監視
- [ ] エラーログの確認
- [ ] 依存関係の更新

### 月次メンテナンス
- [ ] GitHub Actionsのバージョン更新
- [ ] 品質チェックツールの更新
- [ ] セキュリティスキャンパターンの見直し

## サポート

問題が発生した場合は、GitHub Issuesで報告してください。ワークフローのログを添付していただくと、より迅速な対応が可能です。
